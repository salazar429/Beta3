<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Due√±o - Sistema de Gesti√≥n</title>
    <meta name="description" content="Sistema de gesti√≥n PWA para due√±os">
    <meta name="theme-color" content="#8e44ad">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest_dueno.json">
    
    <!-- Iconos para Apple -->
    <link rel="apple-touch-icon" href="icons/dueno-icon-192.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Estilos profesionales -->
    <link rel="stylesheet" href="styles_due√±o (1).css">
    
    <style>
        /* ===== SPLASH SCREEN ===== */
        .splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            background: linear-gradient(135deg, #8e44ad, #9b59b6);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 0.5s ease, visibility 0.5s ease;
            color: white;
            text-align: center;
            padding: 20px;
        }
        
        .splash-screen.hidden {
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
        }
        
        .splash-icon {
            font-size: 6rem;
            margin-bottom: 1rem;
            animation: pulse 2s infinite;
        }
        
        .splash-title {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            letter-spacing: 2px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        
        .splash-subtitle {
            font-size: 1rem;
            opacity: 0.9;
            margin-bottom: 2rem;
        }
        
        .splash-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* ===== ESTILOS GENERALES ===== */
        .page-section {
            display: none;
        }
        .page-section.active {
            display: block;
        }
        
        .search-container {
            display: none;
        }
        .search-container.visible {
            display: block;
        }
        
        #formAgregarVendedora,
        #formAgregarProducto,
        #formAgregarCategoria {
            display: none;
        }
        #formAgregarVendedora.visible,
        #formAgregarProducto.visible,
        #formAgregarCategoria.visible {
            display: block;
        }
        
        .edit-producto-form {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .edit-producto-form.visible {
            display: block;
        }
        
        /* ===== ESTADO DE CONEXI√ìN ===== */
        .connection-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-left: 12px;
            position: relative;
            transition: all 0.3s ease;
        }
        
        .connection-dot.online {
            background-color: #2ecc71;
            box-shadow: 0 0 8px #2ecc71;
            animation: pulse-green 2s infinite;
        }
        
        .connection-dot.offline {
            background-color: #e74c3c;
            box-shadow: 0 0 8px #e74c3c;
        }
        
        .connection-dot.syncing {
            background-color: #f39c12;
            box-shadow: 0 0 8px #f39c12;
            animation: pulse-orange 1s infinite;
        }
        
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(46, 204, 113, 0); }
            100% { box-shadow: 0 0 0 0 rgba(46, 204, 113, 0); }
        }
        
        @keyframes pulse-orange {
            0% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(243, 156, 18, 0); }
            100% { box-shadow: 0 0 0 0 rgba(243, 156, 18, 0); }
        }
        
        .user-info {
            display: flex;
            align-items: center;
            position: relative;
        }
        
        /* ===== MEN√ö DE USUARIO ===== */
        .menu-item {
            padding: 10px 16px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .menu-item:hover {
            background-color: #f5f5f5;
        }
        
        /* ===== REPORTES ===== */
        .reporte-card {
            margin-bottom: 15px;
            border-left: 5px solid #3498db;
        }
        
        details summary {
            color: #3498db;
            cursor: pointer;
            font-weight: 600;
            padding: 5px 0;
        }
        
        details summary:hover {
            text-decoration: underline;
        }
        
        /* ===== RESPONSIVE ===== */
        @media (max-width: 768px) {
            .grid-2 {
                grid-template-columns: 1fr !important;
            }
        }
        
        /* ===== SPINNER ===== */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #9b59b6;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }
    </style>
</head>
<body>
    <!-- ===== SPLASH SCREEN ===== -->
    <div id="splashScreen" class="splash-screen">
        <div class="splash-icon">üëë</div>
        <div class="splash-title">Sistema Due√±o</div>
        <div class="splash-subtitle">Gesti√≥n de Vendedoras y Productos</div>
        <div class="splash-spinner"></div>
    </div>

    <!-- Header -->
    <header id="mainHeader" style="display: none;">
        <div class="header-container">
            <div class="logo">
                <span>üëë</span>
                <h1>Sistema Due√±o</h1>
            </div>
            <div class="user-info">
                <span id="userName">Administrador</span>
                <div class="avatar" id="userAvatar">AD</div>
                <!-- PUNTO DE ESTADO DE CONEXI√ìN -->
                <div id="connectionDot" class="connection-dot online" title="Conectado"></div>
            </div>
        </div>
    </header>

    <!-- Contenido principal -->
    <main>
        <!-- ========== SECCI√ìN DASHBOARD ========== -->
        <div id="dashboardSection" class="page-section active">
            <!-- Gesti√≥n de Datos -->
            <div class="card data-management">
                <h3 class="section-title">Panel de Control</h3>
                <div class="data-actions">
                    <button class="btn btn-primary" id="exportDataBtn" onclick="alert('Falta implementaci√≥n')">
                        <span>üì•</span>
                        <span>Exportar Datos</span>
                    </button>
                    <label class="btn btn-secondary" id="importDataLabel" onclick="alert('Falta implementaci√≥n')">
                        <span>üì§</span>
                        <span>Importar Datos</span>
                        <input type="file" id="importDataInput" accept=".json" style="display: none;">
                    </label>
                    <button class="btn btn-warning" id="syncAllBtn" onclick="alert('Falta implementaci√≥n')">
                        <span>üîÑ</span>
                        <span>Sincronizar</span>
                    </button>
                    <button class="btn btn-danger" id="clearDataBtn" onclick="alert('Falta implementaci√≥n')">
                        <span>üóëÔ∏è</span>
                        <span>Limpiar Datos</span>
                    </button>
                </div>
                <div class="data-info">
                    <p>üìä <strong>Sistema de Gesti√≥n</strong> - Administra vendedoras y productos</p>
                    <p>üíæ <strong>Datos persistentes</strong> - Los cambios se guardan autom√°ticamente</p>
                </div>
            </div>
        </div>

        <!-- ========== SECCI√ìN VENDEDORAS ========== -->
        <div id="vendedorasSection" class="page-section">
            <div class="card">
                <div class="section-header">
                    <h2 class="section-title">
                        üë©‚Äçüíº Gesti√≥n de Vendedoras
                        <span id="vendedorasCount">(0 vendedoras)</span>
                    </h2>
                    <button id="btnToggleFormVendedora" class="btn btn-primary" onclick="toggleFormVendedora()">
                        <span>‚ûï</span>
                        <span>Agregar Vendedora</span>
                    </button>
                </div>
                
                <!-- Formulario de agregar vendedora -->
                <div id="formAgregarVendedora" style="display: none;">
                    <div class="card" style="margin-top: 10px; background: #f8f9fa;">
                        <div class="form-group">
                            <label>Nombre completo</label>
                            <input type="text" id="vendedoraNombre" class="form-control" placeholder="Ej: Juan P√©rez">
                        </div>
                        <div class="form-group">
                            <label>Usuario</label>
                            <input type="text" id="vendedoraUsuario" class="form-control" placeholder="Ej: juan_p">
                        </div>
                        <div class="form-group">
                            <label>Contrase√±a</label>
                            <input type="text" id="vendedoraPassword" class="form-control" value="123456">
                        </div>
                        <div class="form-group">
                            <label>Tienda</label>
                            <input type="text" id="vendedoraTienda" class="form-control" placeholder="Ej: Tienda Centro">
                        </div>
                        <button id="btnGuardarVendedora" class="btn btn-primary" style="width: 100%;" onclick="App.guardarVendedora()">üíæ Guardar Vendedora</button>
                        <div id="vendedoraResultado" style="margin-top: 15px; display: none; padding: 10px; border-radius: var(--border-radius);"></div>
                    </div>
                </div>
            </div>

            <!-- Lista de vendedoras -->
            <div class="card">
                <div class="section-header">
                    <h3 class="section-title">Vendedoras Registradas</h3>
                    <button class="btn btn-sm btn-secondary" onclick="App.cargarVendedoras()">
                        <span>üîÑ</span> Recargar
                    </button>
                </div>
                <div id="vendedorasContainer">
                    <div style="text-align: center; padding: 40px; color: #7f8c8d;">
                        <div class="spinner" style="display: inline-block;"></div>
                        <p style="margin-top: 10px;">Cargando vendedoras...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== SECCI√ìN PRODUCTOS ========== -->
        <div id="productosSection" class="page-section">
            <div class="card">
                <div class="section-header">
                    <h2 class="section-title">
                        üì¶ Gesti√≥n de Productos
                        <span id="productosCount">(0 productos)</span>
                    </h2>
                    <button id="btnToggleFormProducto" class="btn btn-primary" onclick="toggleFormProducto()">
                        <span>‚ûï</span>
                        <span>Agregar Producto</span>
                    </button>
                </div>
                
                <!-- Formulario de agregar producto -->
                <div id="formAgregarProducto" style="display: none;">
                    <div class="card" style="margin-top: 10px; background: #f8f9fa;">
                        <div class="form-group">
                            <label>Nombre del producto</label>
                            <input type="text" id="productoNombre" class="form-control" placeholder="Ej: Camisa">
                        </div>
                        <div class="form-group">
                            <label>Categor√≠a</label>
                            <select id="productoCategoria" class="form-control">
                                <option value="">Cargando categor√≠as...</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label>Precio ($)</label>
                            <input type="number" id="productoPrecio" class="form-control" step="0.01" min="0" placeholder="0.00">
                        </div>
                        <div class="form-group">
                            <label>Stock</label>
                            <input type="number" id="productoStock" class="form-control" min="0" placeholder="0">
                        </div>
                        <div class="form-group">
                            <label>Stock m√≠nimo</label>
                            <input type="number" id="productoMinStock" class="form-control" min="0" placeholder="5" value="5">
                        </div>
                        <button id="btnGuardarProducto" class="btn btn-primary" style="width: 100%;" onclick="App.guardarProducto()">üíæ Guardar Producto</button>
                        <div id="productoResultado" style="margin-top: 15px; display: none; padding: 10px; border-radius: var(--border-radius);"></div>
                    </div>
                </div>
            </div>

            <!-- Lista de productos -->
            <div class="card">
                <div class="section-header">
                    <h3 class="section-title">Productos Disponibles</h3>
                    <button class="btn btn-sm btn-secondary" onclick="App.cargarProductos()">
                        <span>üîÑ</span> Recargar
                    </button>
                </div>
                <div id="productosContainer">
                    <div style="text-align: center; padding: 40px;">
                        <div class="spinner" style="display: inline-block;"></div>
                        <p style="margin-top: 10px; color: #7f8c8d;">Cargando productos...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== SECCI√ìN CATEGOR√çAS ========== -->
        <div id="categoriasSection" class="page-section">
            <div class="card">
                <div class="section-header">
                    <h2 class="section-title">
                        üè∑Ô∏è Gesti√≥n de Categor√≠as
                        <span id="categoriasCount">(0 categor√≠as)</span>
                    </h2>
                    <button id="btnToggleFormCategoria" class="btn btn-primary" onclick="toggleFormCategoria()">
                        <span>‚ûï</span>
                        <span>Nueva Categor√≠a</span>
                    </button>
                </div>
                
                <!-- Formulario de agregar categor√≠a -->
                <div id="formAgregarCategoria" style="display: none;">
                    <div class="card" style="margin-top: 10px; background: #f8f9fa;">
                        <div class="form-group">
                            <label>Nombre de la categor√≠a *</label>
                            <input type="text" id="categoriaNombre" class="form-control" placeholder="Ej: Electr√≥nica">
                        </div>
                        <div class="form-group">
                            <label>Descripci√≥n (opcional)</label>
                            <textarea id="categoriaDescripcion" class="form-control" rows="2" placeholder="Descripci√≥n de la categor√≠a"></textarea>
                        </div>
                        <button id="btnGuardarCategoria" class="btn btn-primary" style="width: 100%;" onclick="App.guardarCategoria()">üíæ Guardar Categor√≠a</button>
                        <div id="categoriaResultado" style="margin-top: 15px; display: none; padding: 10px; border-radius: var(--border-radius);"></div>
                    </div>
                </div>
            </div>

            <!-- Lista de categor√≠as -->
            <div class="card">
                <div class="section-header">
                    <h3 class="section-title">Categor√≠as Registradas</h3>
                    <button class="btn btn-sm btn-secondary" onclick="App.cargarCategorias()">
                        <span>üîÑ</span> Recargar
                    </button>
                </div>
                <div id="categoriasContainer">
                    <div style="text-align: center; padding: 40px;">
                        <div class="spinner" style="display: inline-block;"></div>
                        <p style="margin-top: 10px; color: #7f8c8d;">Cargando categor√≠as...</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- ========== SECCI√ìN REPORTES ========== -->
        <div id="reportesSection" class="page-section">
            <div class="card">
                <div class="section-header">
                    <h2 class="section-title">
                        üìã Reportes Recibidos
                        <span id="reportesCount">(0 reportes)</span>
                    </h2>
                    <button id="btnRecargarReportes" class="btn btn-sm btn-secondary" onclick="App.cargarReportes()">
                        <span>üîÑ</span> Recargar
                    </button>
                </div>
                
                <div id="reportesContainer" style="max-height: 500px; overflow-y: auto;">
                    <div style="text-align: center; padding: 60px 20px; color: #7f8c8d;">
                        <div class="spinner" style="display: inline-block;"></div>
                        <p style="margin-top: 10px;">Cargando reportes...</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Men√∫ inferior -->
    <nav class="bottom-nav">
        <a href="#" class="nav-item active" data-page="dashboard" onclick="switchPage('dashboard'); return false;">
            <span class="nav-icon">üìä</span>
            <span class="nav-label">Dashboard</span>
        </a>
        <a href="#" class="nav-item" data-page="vendedoras" onclick="switchPage('vendedoras'); return false;">
            <span class="nav-icon">üë©‚Äçüíº</span>
            <span class="nav-label">Vendedoras</span>
        </a>
        <a href="#" class="nav-item" data-page="productos" onclick="switchPage('productos'); return false;">
            <span class="nav-icon">üì¶</span>
            <span class="nav-label">Productos</span>
        </a>
        <a href="#" class="nav-item" data-page="categorias" onclick="switchPage('categorias'); return false;">
            <span class="nav-icon">üè∑Ô∏è</span>
            <span class="nav-label">Categor√≠as</span>
        </a>
        <a href="#" class="nav-item" data-page="reportes" onclick="switchPage('reportes'); return false;">
            <span class="nav-icon">üìã</span>
            <span class="nav-label">Reportes</span>
        </a>
    </nav>

    <!-- Notificaci√≥n -->
    <div id="notification" class="notification" style="display: none;"></div>

    <script src="app_due√±o.js"></script>
</body>
</html>
